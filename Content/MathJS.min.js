function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;a=self;b=a.WebSharper=a.WebSharper||{};c=b.MathJS=b.MathJS||{};d=c.Samples=c.Samples||{};e=d.Main=d.Main||{};f=b.Operators=b.Operators||{};g=b.Obj=b.Obj||{};h=b.UI=b.UI||{};i=h.Doc=h.Doc||{};j=h.Array=h.Array||{};k=h.Var$1=h.Var$1||{};l=h.View=h.View||{};m=h.Templating=h.Templating||{};n=m.Runtime=m.Runtime||{};o=n.Server=n.Server||{};p=o.TemplateInstance=o.TemplateInstance||{};q=b.Arrays=b.Arrays||{};r=o.ProviderBuilder=o.ProviderBuilder||{};s=o.Handler=o.Handler||{};t=a.MathJS_Templates=a.MathJS_Templates||{};u=h.Var=h.Var||{};v=a.EventTarget;w=h.Client=h.Client||{};x=w.Templates=w.Templates||{};y=b.JavaScript=b.JavaScript||{};z=y.Pervasives=y.Pervasives||{};A=b.List=b.List||{};B=A.T=A.T||{};C=b.Unchecked=b.Unchecked||{};D=a.Object;E=h.DomUtility=h.DomUtility||{};F=h.ConcreteVar=h.ConcreteVar||{};G=h.Snap=h.Snap||{};H=b.Collections=b.Collections||{};I=H.List=H.List||{};J=a.System=a.System||{};K=J.Guid=J.Guid||{};L=H.Dictionary=H.Dictionary||{};M=H.HashSet=H.HashSet||{};N=n.Client=n.Client||{};O=b.Seq=b.Seq||{};P=h.AttrModule=h.AttrModule||{};Q=a.Node;R=y.JS=y.JS||{};S=h.DocElemNode=h.DocElemNode||{};T=a.CharacterData;U=b.Enumerator=b.Enumerator||{};V=h.AttrProxy=h.AttrProxy||{};W=h.Abbrev=h.Abbrev||{};X=W.Fresh=W.Fresh||{};Y=H.DictionaryUtil=H.DictionaryUtil||{};Z=U.T=U.T||{};_0=h.CheckedInput=h.CheckedInput||{};_1=b.Numeric=b.Numeric||{};_2=h.Attrs=h.Attrs||{};_3=h.Docs=h.Docs||{};_4=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_5=a.WindowOrWorkerGlobalScope;_6=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_7=w.Attrs=w.Attrs||{};_8=_7.Dyn=_7.Dyn||{};_9=h.Elt=h.Elt||{};_=h.DynamicAttrNode=h.DynamicAttrNode||{};$=x.Prepare=x.Prepare||{};ba=b.Slice=b.Slice||{};bb=H.KeyCollection=H.KeyCollection||{};bc=h.An=h.An||{};bd=w.Settings=w.Settings||{};be=W.Mailbox=W.Mailbox||{};bf=h.Updates=h.Updates||{};bg=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bh=b.Strings=b.Strings||{};bi=w.Docs=w.Docs||{};bj=bi.RunState=bi.RunState||{};bk=bi.NodeSet=bi.NodeSet||{};bl=h.Anims=h.Anims||{};bm=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bn=H.HashSetUtil=H.HashSetUtil||{};bo=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bp=b.Queue=b.Queue||{};bq=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};br=b.Concurrency=b.Concurrency||{};bs=h.AppendList=h.AppendList||{};bt=h.String=h.String||{};bu=h.Easing=h.Easing||{};bv=br.AsyncBody=br.AsyncBody||{};bw=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bx=br.CT=br.CT||{};by=W.HashSet=W.HashSet||{};bz=b.Char=b.Char||{};bA=br.Scheduler=br.Scheduler||{};bB=b.CancellationTokenSource=b.CancellationTokenSource||{};bC=bi.DomNodes=bi.DomNodes||{};bD=a.Error;bE=b.OperationCanceledException=b.OperationCanceledException||{};bF=b.Lazy=b.Lazy||{};bG=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bH=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bI=bH.LazyRecord=bH.LazyRecord||{};bJ=a.math;bK=a.MathJax;bL=bK&&bK.Hub;bM=a.IntelliFactory;bN=bM&&bM.Runtime;bO=a.console;bP=a.jQuery;bQ=a.Math;bR=a.Date;e.Main=function(){var bS;bS=i.Concat([i.Element("h3",[],[i.TextNode("Big numbers")]),e.BigNumbers(),i.Element("h3",[],[i.TextNode("Differentiation")]),e.Differentiation(),i.Element("h3",[],[i.TextNode("Vector operations")]),e.Vectors(),i.Element("h3",[],[i.TextNode("Matrix operations")]),e.Matrices(),i.Element("h3",[],[i.TextNode("Units")]),e.Units()]);x.LoadLocalTemplates("");i.RunById("main",bS);};e.BigNumbers=function(){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;function b3(b4){return l.Map2(function(b5,b6){var b7;try{b7=(b4(bJ.bignumber(b5)))(bJ.bignumber(b6));return a.String(b7);}catch(b8){return"Wrong input";}},bU,bV);}bS=k.Create$1("1");bT=k.Create$1("1");bU=bS.get_View();bV=bT.get_View();bW=b3(function(b4){return function(b5){return bJ.add(b4,b5);};});bX=b3(function(b4){return function(b5){return bJ.subtract(b4,b5);};});bY=b3(function(b4){return function(b5){return bJ.multiply(b4,b5);};});bZ=b3(function(b4){return function(b5){return bJ.divide(b4,b5);};});return(b0=r.Make().WithHole({$:8,$0:"input1",$1:bS}).WithHole({$:8,$0:"input2",$1:bT}).WithHole({$:2,$0:"resultadd",$1:bW}).WithHole({$:2,$0:"resultsubtract",$1:bX}).WithHole({$:2,$0:"resultmultiply",$1:bY}).WithHole({$:2,$0:"resultdivide",$1:bZ}),(b1=s.CompleteHoles(b0.k,b0.h,[["input1",0],["input2",0]]),(b2=new p.New(b1[1],t.bignumbers(b1[0])),(b0.i=b2,b2)))).get_Doc();};e.Differentiation=function(){var bS,bT,bU,bV,bW,bX,bY,bZ,b0;function b1(b2,b3){b2.textContent="$$"+b3+"$$";bL.Queue([["Typeset",bL,[b2]]]);}bL.Config((bS={},bS.extensions=["tex2jax.js"],bS.jax=["input/TeX","output/HTML-CSS"],bS.tex2jax=(bT={},bT.inlineMath=[["$","$"],["\\(","\\)"]],bT),bS));bU=k.Create$1("x^2/(x^9 + x^2) + x^4/2");bV=k.Create$1("x");bW=l.Map2(function(b2,b3){var b4;try{return bJ.derivative(b2,b3,(b4={},b4.simplify=true,b4)).toTex();}catch(b5){return"The\\ formula\\ isn't\\ correct.";}},bU.get_View(),bV.get_View());bX=i.Element("div",[P.DynamicCustom(function(b2){return function(b3){return b1(b2,b3);};},bW)],[i.TextView(l.Map(function(b2){return"$$"+b2+"$$";},bW))]);return(bY=r.Make().WithHole({$:8,$0:"formula",$1:bU}).WithHole({$:8,$0:"derivateby",$1:bV}).WithHole({$:0,$0:"tex",$1:bX}),(bZ=s.CompleteHoles(bY.k,bY.h,[["formula",0],["derivateby",0]]),(b0=new p.New(bZ[1],t.differentiation(bZ[0])),(bY.i=b0,b0)))).get_Doc();};e.Vectors=function(){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;function b7(b8){return"["+a.String((b8(bU))(bV))+"]";}bL.Config((bS={},bS.extensions=["tex2jax.js"],bS.jax=["input/TeX","output/HTML-CSS"],bS.tex2jax=(bT={},bT.inlineMath=[["$","$"],["\\(","\\)"]],bT),bS));bU=[8,6,4,6];bV=[6,14,8,2];bW="$"+bJ.parse("["+a.String(bU)+"]").toTex()+"$";bX="$"+bJ.parse("["+a.String(bV)+"]").toTex()+"$";bY=b7(function(b8){return function(b9){return bJ.add(b8,b9);};});bZ=b7(function(b8){return function(b9){return bJ.subtract(b8,b9);};});b0=b7(function(b8){return function(b9){return bJ.multiply(b8,b9);};});b1="$"+bJ.parse(a.String(bY)).toTex()+"$";b2="$"+bJ.parse(a.String(bZ)).toTex()+"$";b3="$"+bJ.parse(a.String(b0)).toTex()+"$";return(b4=r.Make().WithHole({$:1,$0:"vector1",$1:bW}).WithHole({$:1,$0:"vector2",$1:bX}).WithHole({$:1,$0:"resultadd",$1:b1}).WithHole({$:1,$0:"resultsubtract",$1:b2}).WithHole({$:1,$0:"resultmultiply",$1:b3}),(b5=s.CompleteHoles(b4.k,b4.h,[]),(b6=new p.New(b5[1],t.vectors(b5[0])),(b4.i=b6,b6)))).get_Doc();};e.Matrices=function(){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function b9(b_){return(b_(bU))(bV);}bL.Config((bS={},bS.extensions=["tex2jax.js"],bS.jax=["input/TeX","output/HTML-CSS"],bS.tex2jax=(bT={},bT.inlineMath=[["$","$"],["\\(","\\)"]],bT),bS));bU=bJ.matrix([[8,6],[4,6]]);bV=bJ.matrix([[6,14],[8,2]]);bW="$"+bJ.parse(a.String(bU)).toTex()+"$";bX="$"+bJ.parse(a.String(bV)).toTex()+"$";bY=b9(function(b_){return function(b$){return bJ.add(b_,b$);};});bZ=b9(function(b_){return function(b$){return bJ.subtract(b_,b$);};});b0=b9(function(b_){return function(b$){return bJ.multiply(b_,b$);};});b1=b9(function(b_){return function(b$){return bJ.divide(b_,b$);};});b2="$"+bJ.parse(a.String(bY)).toTex()+"$";b3="$"+bJ.parse(a.String(bZ)).toTex()+"$";b4="$"+bJ.parse(a.String(b0)).toTex()+"$";b5="$"+bJ.parse(a.String(b1)).toTex()+"$";return(b6=r.Make().WithHole({$:1,$0:"matrix1",$1:bW}).WithHole({$:1,$0:"matrix2",$1:bX}).WithHole({$:1,$0:"resultadd",$1:b2}).WithHole({$:1,$0:"resultsubtract",$1:b3}).WithHole({$:1,$0:"resultmultiply",$1:b4}).WithHole({$:1,$0:"resultdivide",$1:b5}),(b7=s.CompleteHoles(b6.k,b6.h,[]),(b8=new p.New(b7[1],t.matrices(b7[0])),(b6.i=b8,b8)))).get_Doc();};e.Units=function(){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function b9(b$){return l.Map2(function(ca,cb){var cc;try{cc=(b$(bJ.unit(ca)))(bJ.unit(cb));return a.String(cc);}catch(cd){return"Wrong input";}},bV,bW);}function b_(b$,ca){return l.Map2(function(cb,cc){try{return a.String(bJ.to(bJ.unit(cb),bJ.unit(cc)));}catch(cd){return"Couldn't translate.";}},b$,ca);}bS=k.Create$1("1 cm");bT=k.Create$1("1 cm");bU=k.Create$1("m");bV=bS.get_View();bW=bT.get_View();bX=bU.get_View();bY=b9(function(b$){return function(ca){return bJ.add(b$,ca);};});bZ=b9(function(b$){return function(ca){return bJ.subtract(b$,ca);};});b0=b9(function(b$){return function(ca){return bJ.multiply(b$,ca);};});b1=b9(function(b$){return function(ca){return bJ.divide(b$,ca);};});b2=b_(bY,bX);b3=b_(bZ,bX);b4=b_(b0,bX);b5=b_(b1,bX);return(b6=r.Make().WithHole({$:8,$0:"input1",$1:bS}).WithHole({$:8,$0:"input2",$1:bT}).WithHole({$:8,$0:"translate",$1:bU}).WithHole({$:2,$0:"resultadd",$1:bY}).WithHole({$:2,$0:"resultsubtract",$1:bZ}).WithHole({$:2,$0:"resultmultiply",$1:b0}).WithHole({$:2,$0:"resultdivide",$1:b1}).WithHole({$:2,$0:"translatedresultadd",$1:b2}).WithHole({$:2,$0:"translatedresultsubtract",$1:b3}).WithHole({$:2,$0:"translatedresultmultiply",$1:b4}).WithHole({$:2,$0:"translatedresultdivide",$1:b5}),(b7=s.CompleteHoles(b6.k,b6.h,[["input1",0],["input2",0],["translate",0]]),(b8=new p.New(b7[1],t.units(b7[0])),(b6.i=b8,b8)))).get_Doc();};f.FailWith=function(bS){throw new bD(bS);};f.KeyValue=function(bS){return[bS.K,bS.V];};g=b.Obj=bN.Class({Equals:function(bS){return this===bS;},GetHashCode:function(){return -1;}},null,g);g.New=bN.Ctor(function(){},g);i=h.Doc=bN.Class({},g,i);i.Concat=function(bS){var bT;bT=j.ofSeqNonCopying(bS);return j.TreeReduce(i.get_Empty(),i.Append,bT);};i.Append=function(bS,bT){return i.Mk({$:0,$0:bS.docNode,$1:bT.docNode},l.Map2Unit(bS.updates,bT.updates));};i.get_Empty=function(){return i.Mk(null,l.Const());};i.TextNode=function(bS){return i.Mk({$:5,$0:E.CreateText(bS)},l.Const());};i.RunById=function(bS,bT){var bU;bU=E.Doc().getElementById(bS);C.Equals(bU,null)?f.FailWith("invalid id: "+bS):i.Run(bU,bT);};i.Mk=function(bS,bT){return new i.New(bS,bT);};i.Element=function(bS,bT,bU){var bV,bW;bV=V.Concat(bT);bW=i.Concat(bU);return _9.New(E.CreateElement(bS),bV,bW);};i.TextView=function(bS){var bT;bT=_3.CreateTextNode();return i.Mk({$:4,$0:bT},l.Map(function(bU){_3.UpdateTextNode(bT,bU);},bS));};i.Run=function(bS,bT){_3.LinkElement(bS,bT.docNode);i.RunInPlace(false,bS,bT);};i.RunInPlace=function(bS,bT,bU){var bV;bV=_3.CreateRunState(bT,bU.docNode);l.Sink(bc.get_UseAnimations()||bd.BatchUpdatesEnabled()?be.StartProcessor(_3.PerformAnimatedUpdate(bS,bV,bU.docNode)):function(){_3.PerformSyncUpdate(bS,bV,bU.docNode);},bU.updates);};i.New=bN.Ctor(function(bS,bT){g.New.call(this);this.docNode=bS;this.updates=bT;},i);j.ofSeqNonCopying=function(bS){var bT,bU;if(bS instanceof a.Array)return bS;else if(bS instanceof B)return q.ofList(bS);else if(bS===null)return[];else{bT=[];bU=U.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};j.TreeReduce=function(bS,bT,bU){var bV;function bW(bX,bY){var bZ,b0;return bY<=0?bS:bY===1&&(bX>=0&&bX<bV)?q.get(bU,bX):(b0=bY/2>>0,bT(bW(bX,b0),bW(bX+b0,bY-b0)));}bV=q.length(bU);return bW(0,bV);};j.MapTreeReduce=function(bS,bT,bU,bV){var bW;function bX(bY,bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?bS(q.get(bV,bY)):(b1=bZ/2>>0,bU(bX(bY,b1),bX(bY+b1,bZ-b1)));}bW=q.length(bV);return bX(0,bW);};k=h.Var$1=bN.Class({},g,k);k.Create$1=function(bS){return new F.New(false,G.New({$:2,$0:bS,$1:[]}),bS);};l.Map2=function(bS,bT,bU){return l.CreateLazy(function(){return G.Map2(bS,bT(),bU());});};l.Map=function(bS,bT){return l.CreateLazy(function(){return G.Map(bS,bT());});};l.Map2Unit=function(bS,bT){return l.CreateLazy(function(){return G.Map2Unit(bS(),bT());});};l.Const=function(bS){var bT;bT=G.New({$:0,$0:bS});return function(){return bT;};};l.CreateLazy=function(bS){var bT;bT={c:null,o:bS};return function(){var bU,bV;bU=bT.c;return bU===null?(bU=bT.o(),bT.c=bU,(bV=bU.s,bV!=null&&bV.$==0)?bT.o=null:G.WhenObsoleteRun(bU,function(){bT.c=null;}),bU):bU;};};l.Sink=function(bS,bT){function bU(){G.WhenRun(bT(),bS,function(){br.scheduler().Fork(bU);});}br.scheduler().Fork(bU);};l.Map3=function(bS,bT,bU,bV){return l.CreateLazy(function(){return G.Map3(bS,bT(),bU(),bV());});};l.Sequence=function(bS){return l.CreateLazy(function(){return G.Sequence(O.map(function(bT){return bT();},bS));});};p=o.TemplateInstance=bN.Class({get_Doc:function(){return this.doc;}},g,p);p.New=bN.Ctor(function(bS,bT){g.New.call(this);this.doc=bT;this.allVars=bS.$==0?bS.$0:f.FailWith("Should not happen");},p);q.get=function(bS,bT){q.checkBounds(bS,bT);return bS[bT];};q.length=function(bS){return bS.dims===2?bS.length*bS.length:bS.length;};q.checkBounds=function(bS,bT){if(bT<0||bT>=bS.length)f.FailWith("Index was outside the bounds of the array.");};q.set=function(bS,bT,bU){q.checkBounds(bS,bT);bS[bT]=bU;};r=o.ProviderBuilder=bN.Class({WithHole:function(bS){this.h.push(bS);return this;}},null,r);r.Make=function(){var bS;return r.New(null,(bS=K.NewGuid(),a.String(bS)),[]);};r.New=function(bS,bT,bU){return new r({i:bS,k:bT,h:bU});};s.CompleteHoles=function(bS,bT,bU){var bW,bX,bY,bZ,b0,b1;function bV(b2,b3){var b4,b5,b6,b7;return bX.Contains(b2)?null:(b4=b3===0?(b5=k.Create$1(""),[{$:8,$0:b2,$1:b5},b5]):b3===1?(b6=k.Create$1(0),[{$:13,$0:b2,$1:b6},b6]):b3===2?(b7=k.Create$1(false),[{$:9,$0:b2,$1:b7},b7]):f.FailWith("Invalid value type"),(bW.set_Item(b2,b4[1]),{$:1,$0:b4[0]}));}bW=new L.New$5();bX=new M.New$3();bY=U.Get(bT);try{while(bY.MoveNext()){bZ=bY.Current();(bZ.$==8?(b0=[bZ.$0,N.Box(bZ.$1)],true):bZ.$==11?(b0=[bZ.$0,N.Box(bZ.$1)],true):bZ.$==10?(b0=[bZ.$0,N.Box(bZ.$1)],true):bZ.$==13?(b0=[bZ.$0,N.Box(bZ.$1)],true):bZ.$==12?(b0=[bZ.$0,N.Box(bZ.$1)],true):bZ.$==9&&(b0=[bZ.$0,N.Box(bZ.$1)],true))?(b1=b0[0],bX.Add(b1),bW.set_Item(b1,b0[1])):void 0;}}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}return[O.append(bT,q.choose(function(b2){return bV(b2[0],b2[1]);},bU)),{$:0,$0:bW}];};t.bignumbers=function(bS){x.LoadLocalTemplates("index");return bS?x.NamedTemplate("index",{$:1,$0:"bignumbers"},bS):void 0;};t.differentiation=function(bS){x.LoadLocalTemplates("index");return bS?x.NamedTemplate("index",{$:1,$0:"differentiation"},bS):void 0;};t.vectors=function(bS){x.LoadLocalTemplates("index");return bS?x.NamedTemplate("index",{$:1,$0:"vectors"},bS):void 0;};t.matrices=function(bS){x.LoadLocalTemplates("index");return bS?x.NamedTemplate("index",{$:1,$0:"matrices"},bS):void 0;};t.units=function(bS){x.LoadLocalTemplates("index");return bS?x.NamedTemplate("index",{$:1,$0:"units"},bS):void 0;};u=h.Var=bN.Class({},g,u);u.New=bN.Ctor(function(){g.New.call(this);},u);x.LoadLocalTemplates=function(bS){!x.LocalTemplatesLoaded()?(x.set_LocalTemplatesLoaded(true),x.LoadNestedTemplates(self.document.body,"")):void 0;x.LoadedTemplates().set_Item(bS,x.LoadedTemplateFile(""));};x.LocalTemplatesLoaded=function(){_4.$cctor();return _4.LocalTemplatesLoaded;};x.set_LocalTemplatesLoaded=function(bS){_4.$cctor();_4.LocalTemplatesLoaded=bS;};x.LoadNestedTemplates=function(bS,bT){var bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function bU(b9){var b_,b$;if(!bV.ContainsKey(b9)){b_=(b$=null,[bW.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?(b8.Add(b9),bW.Remove(b9),x.PrepareTemplateStrict(bT,{$:1,$0:b9},b_[1][0],{$:1,$0:b_[1][1]},{$:1,$0:bU})):bO.warn(b8.Contains(b9)?"Encountered loop when instantiating "+b9:"Local template does not exist: "+b9);}}bV=x.LoadedTemplateFile(bT);bW=new L.New$5();bX=bS.querySelectorAll("[ws-template]");for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=bX[bY];b1=b0.getAttribute("ws-template").toLowerCase();b0.removeAttribute("ws-template");bW.set_Item(b1,[[b0],x.FakeRootSingle(b0)]);}b2=bS.querySelectorAll("[ws-children-template]");for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];b6=b5.getAttribute("ws-children-template").toLowerCase();b5.removeAttribute("ws-children-template");bW.set_Item(b6,(b7=E.ChildrenArray(b5),[b7,x.FakeRoot(b7)]));}b8=new M.New$3();while(bW.count>0)bU(O.head(bW.get_Keys()));};x.LoadedTemplates=function(){_4.$cctor();return _4.LoadedTemplates;};x.LoadedTemplateFile=function(bS){var bT,bU,bV;bT=(bU=null,[x.LoadedTemplates().TryGetValue(bS,{get:function(){return bU;},set:function(bW){bU=bW;}}),bU]);return bT[0]?bT[1]:(bV=new L.New$5(),(x.LoadedTemplates().set_Item(bS,bV),bV));};x.NamedTemplate=function(bS,bT,bU){var bV,bW;bV=(bW=null,[x.LoadedTemplateFile(bS).TryGetValue(bT==null?"":bT.$0,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?x.ChildrenTemplate(bV[1].cloneNode(true),bU):(bO.warn("Local template doesn't exist",bT),i.get_Empty());};x.FakeRootSingle=function(bS){var bT,bU,bV;bS.removeAttribute("ws-template");bT=bS.getAttribute("ws-replace");bT===null?void 0:(bS.removeAttribute("ws-replace"),bU=bS.parentNode,C.Equals(bU,null)?void 0:(bV=self.document.createElement(bS.tagName),bV.setAttribute("ws-replace",bT),bU.replaceChild(bV,bS)));return x.FakeRoot([bS]);};x.FakeRoot=function(bS){var bT,bU,bV;bT=self.document.createElement("div");for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT.appendChild(q.get(bS,bU));return bT;};x.PrepareTemplateStrict=function(bS,bT,bU,bV,bW){var bX,bY;function bZ(b4,b5){var b6,b7,b8,b9,b_,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;function b$(cv){}while(true)switch(b4){case 0:if(b5!==null){b6=b5.nextSibling;if(C.Equals(b5.nodeType,Q.TEXT_NODE))$.convertTextNode(b5);else if(C.Equals(b5.nodeType,Q.ELEMENT_NODE))b1(b5);b5=b6;}else return null;break;case 1:ca=ba.string(b5.nodeName,{$:1,$0:3},null).toLowerCase();cb=(b7=ca.indexOf("."),b7===-1?[bS,ca]:[ba.string(ca,null,{$:1,$0:b7-1}),ba.string(ca,{$:1,$0:b7+1},null)]);cc=cb[1];cd=cb[0];if(cd!==""&&!x.LoadedTemplates().ContainsKey(cd))return $.failNotLoaded(cc);else{if(cd===""&&bW!=null)bW.$0(cc);ce=x.LoadedTemplates().get_Item(cd);if(!ce.ContainsKey(cc))return $.failNotLoaded(cc);else{cf=ce.get_Item(cc);cg=cf.cloneNode(true);ch=new M.New$3();ci=new L.New$5();cj=b5.attributes;for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj.item(ck).name.toLowerCase();ci.set_Item(cm,(cn=cj.item(ck).nodeValue,cn===""?cm:cn.toLowerCase()));!ch.Add(cm)?bO.warn("Hole mapped twice",cm):void 0;}for(co=0,cp=b5.childNodes.length-1;co<=cp;co++){cq=b5.childNodes[co];C.Equals(cq.nodeType,Q.ELEMENT_NODE)?!ch.Add(cq.nodeName.toLowerCase())?bO.warn("Hole filled twice",cc):void 0:void 0;}cr=b5.childNodes.length===1&&C.Equals(b5.firstChild.nodeType,Q.TEXT_NODE);if(cr){b9=$.fillTextHole(cg,b5.firstChild.textContent,cc);((function(cv){return function(cw){if(cw!=null)cv(cw.$0);};}((b_=function(cv){return function(cw){return cv.Add(cw);};}(ch),function(cv){return b$(b_(cv));})))(b9));}$.removeHolesExcept(cg,ch);if(!cr){for(cs=0,ct=b5.childNodes.length-1;cs<=ct;cs++){cu=b5.childNodes[cs];C.Equals(cu.nodeType,Q.ELEMENT_NODE)?cu.hasAttributes()?$.fillInstanceAttrs(cg,cu):b0(cg,cu):void 0;}}$.mapHoles(cg,ci);$.fill(cg,b5.parentNode,b5);b5.parentNode.removeChild(b5);return;}}break;}}function b0(b4,b5){var b6,b8,b9;function b7(b_,b$){var ca,cb,cc;if(b8==="title"&&b5.hasChildNodes()){ca=bP.parseHTML(b5.textContent);b5.removeChild(b5.firstChild);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b5.appendChild(q.get(ca,cb));}else null;b1(b5);return $.fill(b5,b_,b$);}b8=b5.nodeName.toLowerCase();E.IterSelector(b4,"[ws-attr-holes]",function(b_){var b$,ca,cb,cc,cd;b$=bh.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=q.get(b$,ca);b_.setAttribute(cc,(cd=new a.RegExp("\\${"+b8+"}","ig"),b_.getAttribute(cc).replace(cd,b5.textContent)));}});b9=b4.querySelector("[ws-hole="+b8+"]");if(C.Equals(b9,null)){b6=b4.querySelector("[ws-replace="+b8+"]");return C.Equals(b6,null)?null:(b7(b6.parentNode,b6),void b6.parentNode.removeChild(b6));}else{while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b9.removeAttribute("ws-hole");return b7(b9,null);}}function b1(b4){if(bh.StartsWith(b4.nodeName.toLowerCase(),"ws-"))b3(b4);else{$.convertAttrs(b4);b2(b4.firstChild);}}function b2(b4){return bZ(0,b4);}function b3(b4){return bZ(1,b4);}bX=bV==null?x.FakeRoot(bU):bV.$0;bY=(bT==null?"":bT.$0).toLowerCase();x.LoadedTemplateFile(bS).set_Item(bY,bX);q.length(bU)>0?(function(b4){var b5,b6,b7,b8;while(true){b5=b4.querySelector("[ws-template]");if(C.Equals(b5,null)){b6=b4.querySelector("[ws-children-template]");if(C.Equals(b6,null))return null;else{b7=b6.getAttribute("ws-children-template");b6.removeAttribute("ws-children-template");x.PrepareTemplateStrict(bS,{$:1,$0:b7},E.ChildrenArray(b6),null,null);b4=b4;}}else{b8=b5.getAttribute("ws-template");(x.PrepareSingleTemplate(bS,{$:1,$0:b8},b5))(null);b4=b4;}}}(bX),b2(q.get(bU,0))):void 0;};x.ChildrenTemplate=function(bS,bT){var bU,bV,bW,bX,bY;bU=x.InlineTemplate(bS,bT);bV=bU[1];bW=bU[0];bX=bW.Els;return!C.Equals(bX,null)&&bX.length===1&&(q.get(bX,0)instanceof Q&&(C.Equals(q.get(bX,0).nodeType,Q.ELEMENT_NODE)&&(bY=q.get(bX,0),true)))?_9.TreeNode(bW,bV):i.Mk({$:6,$0:bW},bV);};x.PrepareSingleTemplate=function(bS,bT,bU){var bV,bW,bX;bV=x.FakeRootSingle(bU);bW=[bU];bX={$:1,$0:bV};return function(bY){x.PrepareTemplateStrict(bS,bT,bW,bX,bY);};};x.InlineTemplate=function(bS,bT){var bU,bV,bW,bX,b0,b1,b2,b3,b4,b5,b6;function bY(b7,b8){var b9,b_,b$;b9=_2.Insert(b7,b8);b1.push(_2.Updates(b9));b2.push([b7,b9]);b_=bN.GetOptional(b9.OnAfterRender);return b_==null?null:(b$=b_.$0,void b3.push(function(){b$(b7);}));}function bZ(b7){var b8,b9;b8=(b9=null,[b4.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);return b8[0]?b8[1].$==0?{$:1,$0:b8[1].$1}:b8[1].$==1?{$:1,$0:i.TextNode(b8[1].$1)}:b8[1].$==2?{$:1,$0:i.TextView(b8[1].$1)}:b8[1].$==8?{$:1,$0:i.TextView(b8[1].$1.get_View())}:b8[1].$==9?{$:1,$0:i.TextView(l.Map(a.String,b8[1].$1.get_View()))}:b8[1].$==10?{$:1,$0:i.TextView(l.Map(function(b_){return b_.get_Input();},b8[1].$1.get_View()))}:b8[1].$==11?{$:1,$0:i.TextView(l.Map(a.String,b8[1].$1.get_View()))}:b8[1].$==12?{$:1,$0:i.TextView(l.Map(function(b_){return b_.get_Input();},b8[1].$1.get_View()))}:b8[1].$==13?{$:1,$0:i.TextView(l.Map(a.String,b8[1].$1.get_View()))}:(bO.warn("Content hole filled with attribute data",b7),null):null;}b0=[];b1=[];b2=[];b3=[];b4=new L.New$5();b5=U.Get(bT);try{while(b5.MoveNext()){b6=b5.Current();b4.set_Item(b6.$0,b6);}}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}bU=E.ChildrenArray(bS);E.IterSelector(bS,"[ws-hole]",function(b7){var b8,b9,b_;b_=b7.getAttribute("ws-hole");b7.removeAttribute("ws-hole");while(b7.hasChildNodes())b7.removeChild(b7.lastChild);b8=bZ(b_);b8!=null&&b8.$==1?(b9=b8.$0,_3.LinkElement(b7,b9.docNode),b0.push(S.New(_2.Empty(b7),b9.docNode,null,b7,X.Int(),null)),b1.push(b9.updates)):void 0;});E.IterSelector(bS,"[ws-replace]",function(b7){var b8,b9,b_,b$,ca,cb;b8=bZ(b7.getAttribute("ws-replace"));b8!=null&&b8.$==1?(b9=b8.$0,b_=b7.parentNode,b$=self.document.createTextNode(""),b_.replaceChild(b$,b7),ca=_3.InsertBeforeDelim(b$,b9.docNode),cb=q.tryFindIndex(function(cc){return b7===cc;},bU),cb==null?void 0:q.set(bU,cb.$0,b9.docNode),b0.push(S.New(_2.Empty(b_),b9.docNode,{$:1,$0:[ca,b$]},b_,X.Int(),null)),b1.push(b9.updates)):void 0;});E.IterSelector(bS,"[ws-attr]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-attr");b7.removeAttribute("ws-attr");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==3?bY(b7,b9[1].$1):bO.warn("Attribute hole filled with non-attribute data",b8):void 0;});E.IterSelector(bS,"[ws-on]",function(b7){bY(b7,V.Concat(q.choose(function(b8){var b9,b_,b$;b9=bh.SplitChars(b8,[":"],1);b_=(b$=null,[b4.TryGetValue(q.get(b9,1),{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);return b_[0]?b_[1].$==4?{$:1,$0:P.Handler(q.get(b9,0),b_[1].$1)}:b_[1].$==5?{$:1,$0:V.Handler(q.get(b9,0),b_[1].$2)}:(bO.warn("Event hole on"+q.get(b9,0)+" filled with non-event data",q.get(b9,1)),null):null;},bh.SplitChars(b7.getAttribute("ws-on"),[" "],1))));b7.removeAttribute("ws-on");});E.IterSelector(bS,"[ws-onafterrender]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-onafterrender");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==6?(b7.removeAttribute("ws-onafterrender"),bY(b7,P.OnAfterRender(b9[1].$1))):b9[1].$==7?(b7.removeAttribute("ws-onafterrender"),bY(b7,P.OnAfterRender(b9[1].$1))):bO.warn("onafterrender hole filled with non-onafterrender data",b8):void 0;});E.IterSelector(bS,"[ws-var]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-var");b7.removeAttribute("ws-var");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==8?bY(b7,P.Value(b9[1].$1)):b9[1].$==9?bY(b7,P.Checked(b9[1].$1)):b9[1].$==10?bY(b7,P.IntValue(b9[1].$1)):b9[1].$==11?bY(b7,P.IntValueUnchecked(b9[1].$1)):b9[1].$==12?bY(b7,P.FloatValue(b9[1].$1)):b9[1].$==13?bY(b7,P.FloatValueUnchecked(b9[1].$1)):bO.warn("Var hole filled with non-Var data",b8):void 0;});E.IterSelector(bS,"[ws-attr-holes]",function(b7){var b8,b9,b_,b$;b8=new a.RegExp(x.TextHoleRE(),"g");b9=bh.SplitChars(b7.getAttribute("ws-attr-holes"),[" "],1);b7.removeAttribute("ws-attr-holes");for(b_=0,b$=b9.length-1;b_<=b$;b_++)(function(){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;cj=q.get(b9,b_);ck=b7.getAttribute(cj);ca=null;cb=0;cl=[];while(ca=b8.exec(ck),ca!==null){cm=ba.string(ck,{$:1,$0:cb},{$:1,$0:b8.lastIndex-q.get(ca,0).length-1});cb=b8.lastIndex;cl.push([cm,q.get(ca,1)]);}cd=ba.string(ck,{$:1,$0:cb},null);b8.lastIndex=0;ce=q.foldBack(function(cn,co){return(function(cp){var cq,cr;cq=cp[0];cr=cp[1];return function(cs){var ct,cu,cv,cw,cx;ct=cs[0];cu=cs[1];cv=(cw=(cx=null,[b4.TryGetValue(cr,{get:function(){return cx;},set:function(cy){cx=cy;}}),cx]),cw[0]?cw[1].$==1?{$:0,$0:cw[1].$1}:cw[1].$==2?{$:1,$0:cw[1].$1}:cw[1].$==8?{$:1,$0:cw[1].$1.get_View()}:cw[1].$==9?{$:1,$0:l.Map(a.String,cw[1].$1.get_View())}:cw[1].$==10?{$:1,$0:l.Map(function(cy){return cy.get_Input();},cw[1].$1.get_View())}:cw[1].$==11?{$:1,$0:l.Map(a.String,cw[1].$1.get_View())}:cw[1].$==12?{$:1,$0:l.Map(function(cy){return cy.get_Input();},cw[1].$1.get_View())}:cw[1].$==13?{$:1,$0:l.Map(a.String,cw[1].$1.get_View())}:(bO.warn("Attribute value hole filled with non-text data",cr),{$:0,$0:""}):{$:0,$0:""});return cv.$==1?[cq,new B({$:1,$0:ct===""?cv.$0:l.Map(function(cy){return cy+ct;},cv.$0),$1:cu})]:[cq+cv.$0+ct,cu];};}(cn))(co);},cl,[cd,B.Empty]);return bY(b7,ce[1].$==1?ce[1].$1.$==1?ce[1].$1.$1.$==1?ce[1].$1.$1.$1.$==0?(cf=ce[0],P.Dynamic(cj,l.Map3(function(cn,co,cp){return cf+cn+co+cp;},ce[1].$0,ce[1].$1.$0,ce[1].$1.$1.$0))):(cg=ce[0],P.Dynamic(cj,l.Map(function(cn){return cg+bh.concat("",cn);},l.Sequence(ce[1])))):(ch=ce[0],P.Dynamic(cj,l.Map2(function(cn,co){return ch+cn+co;},ce[1].$0,ce[1].$1.$0))):ce[0]===""?P.Dynamic(cj,ce[1].$0):(ci=ce[0],P.Dynamic(cj,l.Map(function(cn){return ci+cn;},ce[1].$0))):V.Create(cj,ce[0]));}());});return[bN.DeleteEmptyFields({Els:bU,Dirty:true,Holes:b0,Attrs:b2,Render:(bV=b3.length==0?null:{$:1,$0:function(b7){q.iter(function(b8){b8(b7);},b3);}},bV?bV.$0:void 0),El:(bW=!C.Equals(bU,null)&&bU.length===1&&(q.get(bU,0)instanceof Q&&(q.get(bU,0)instanceof a.Element&&(bX=q.get(bU,0),true)))?{$:1,$0:bX}:null,bW?bW.$0:void 0)},["Render","El"]),j.TreeReduce(l.Const(),l.Map2Unit,b1)];};x.TextHoleRE=function(){_4.$cctor();return _4.TextHoleRE;};z.NewFromSeq=function(bS){var bT,bU,bV;bT={};bU=U.Get(bS);try{while(bU.MoveNext()){bV=bU.Current();bT[bV[0]]=bV[1];}}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}return bT;};l=h.View=bN.Class({},null,l);B=A.T=bN.Class({GetEnumerator:function(){return new Z.New(this,null,function(bS){var bT;bT=bS.s;return bT.$==0?false:(bS.c=bT.$0,bS.s=bT.$1,true);},void 0);},GetEnumerator0:function(){return U.Get(this);}},null,B);B.Empty=new B({$:0});q.ofList=function(bS){var bT,bU;bU=[];bT=bS;while(!(bT.$==0)){bU.push(A.head(bT));bT=A.tail(bT);}return bU;};q.choose=function(bS,bT){var bU,bV,bW,bX;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++){bX=bS(bT[bV]);bX==null?void 0:bU.push(bX.$0);}return bU;};q.tryFindIndex=function(bS,bT){var bU,bV;bU=null;bV=0;while(bV<bT.length&&bU==null){bS(bT[bV])?bU={$:1,$0:bV}:void 0;bV=bV+1;}return bU;};q.exists=function(bS,bT){var bU,bV,bW,bX;bU=false;bV=0;bX=q.length(bT);while(!bU&&bV<bX)if(bS(bT[bV]))bU=true;else bV=bV+1;return bU;};q.tryPick=function(bS,bT){var bU,bV,bW;bU=null;bV=0;while(bV<bT.length&&bU==null){bW=bS(bT[bV]);bW!=null&&bW.$==1?bU=bW:void 0;bV=bV+1;}return bU;};q.filter=function(bS,bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++)if(bS(bT[bV]))bU.push(bT[bV]);return bU;};q.map=function(bS,bT){var bU,bV,bW;bU=new a.Array(bT.length);for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU[bV]=bS(bT[bV]);return bU;};q.iter=function(bS,bT){var bU,bV;for(bU=0,bV=bT.length-1;bU<=bV;bU++)bS(bT[bU]);};q.foldBack=function(bS,bT,bU){var bV,bW,bX,bY,bZ;bV=bU;bX=bT.length;for(bY=1,bZ=bX;bY<=bZ;bY++)bV=bS(bT[bX-bY],bV);return bV;};q.concat=function(bS){return a.Array.prototype.concat.apply([],q.ofSeq(bS));};q.pick=function(bS,bT){var bU;bU=q.tryPick(bS,bT);return bU==null?f.FailWith("KeyNotFoundException"):bU.$0;};q.ofSeq=function(bS){var bT,bU;if(bS instanceof a.Array)return bS.slice();else if(bS instanceof B)return q.ofList(bS);else{bT=[];bU=U.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};q.forall=function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=q.length(bT);while(bU&&bV<bX)if(bS(bT[bV]))bV=bV+1;else bU=false;return bU;};q.create=function(bS,bT){var bU,bV,bW;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT;return bU;};q.init=function(bS,bT){var bU,bV,bW;bS<0?f.FailWith("Negative size given."):null;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT(bV);return bU;};C.Equals=function(bS,bT){var bU,bV,bW,bX;if(bS===bT)return true;else{bU=typeof bS;if(bU=="object"){if(bS===null||bS===void 0||bT===null||bT===void 0)return false;else if("Equals"in bS)return bS.Equals(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)return C.arrayEquals(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)return C.dateEquals(bS,bT);else{bV=[true];for(var bY in bS)if(function(bZ){bV[0]=!bS.hasOwnProperty(bZ)||bT.hasOwnProperty(bZ)&&C.Equals(bS[bZ],bT[bZ]);return!bV[0];}(bY))break;if(bV[0]){for(var bZ in bT)if(function(b0){bV[0]=!bT.hasOwnProperty(b0)||bS.hasOwnProperty(b0);return!bV[0];}(bZ))break;}return bV[0];}}else return bU=="function"&&("$Func"in bS?bS.$Func===bT.$Func&&bS.$Target===bT.$Target:"$Invokes"in bS&&"$Invokes"in bT&&C.arrayEquals(bS.$Invokes,bT.$Invokes));}};C.arrayEquals=function(bS,bT){var bU,bV;if(q.length(bS)===q.length(bT)){bU=true;bV=0;while(bU&&bV<q.length(bS)){!C.Equals(q.get(bS,bV),q.get(bT,bV))?bU=false:void 0;bV=bV+1;}return bU;}else return false;};C.dateEquals=function(bS,bT){return bS.getTime()===bT.getTime();};C.Hash=function(bS){var bT;bT=typeof bS;return bT=="function"?0:bT=="boolean"?bS?1:0:bT=="number"?bS:bT=="string"?C.hashString(bS):bT=="object"?bS==null?0:bS instanceof a.Array?C.hashArray(bS):C.hashObject(bS):0;};C.hashString=function(bS){var bT,bU,bV;if(bS===null)return 0;else{bT=5381;for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT=C.hashMix(bT,bS[bU].charCodeAt());return bT;}};C.hashArray=function(bS){var bT,bU,bV;bT=-34948909;for(bU=0,bV=q.length(bS)-1;bU<=bV;bU++)bT=C.hashMix(bT,C.Hash(q.get(bS,bU)));return bT;};C.hashObject=function(bS){var bT,bU;if("GetHashCode"in bS)return bS.GetHashCode();else{bT=[0];for(var bV in bS)if(function(bW){bT[0]=C.hashMix(C.hashMix(bT[0],C.hashString(bW)),C.Hash(bS[bW]));return false;}(bV))break;return bT[0];}};C.hashMix=function(bS,bT){return(bS<<5)+bS+bT;};C.Compare=function(bS,bT){var bU,bV,bW,bX,bY,bZ;if(bS===bT)return 0;else{bV=typeof bS;switch(bV=="function"?1:bV=="boolean"?2:bV=="number"?2:bV=="string"?2:bV=="object"?3:0){case 0:return typeof bT=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return bS<bT?-1:1;case 3:if(bS===null)bW=-1;else if(bT===null)bW=1;else if("CompareTo"in bS)bW=bS.CompareTo(bT);else if("CompareTo0"in bS)bW=bS.CompareTo0(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)bW=C.compareArrays(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)bW=C.compareDates(bS,bT);else{bX=[0];for(var b0 in bS)if(function(b1){return!bS.hasOwnProperty(b1)?false:!bT.hasOwnProperty(b1)?(bX[0]=1,true):(bX[0]=C.Compare(bS[b1],bT[b1]),bX[0]!==0);}(b0))break;if(bX[0]===0){for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bS.hasOwnProperty(b2)&&(bX[0]=-1,true);}(b1))break;}bW=bX[0];}return bW;}}};C.compareArrays=function(bS,bT){var bU,bV;if(q.length(bS)<q.length(bT))return -1;else if(q.length(bS)>q.length(bT))return 1;else{bU=0;bV=0;while(bU===0&&bV<q.length(bS)){bU=C.Compare(q.get(bS,bV),q.get(bT,bV));bV=bV+1;}return bU;}};C.compareDates=function(bS,bT){return C.Compare(bS.getTime(),bT.getTime());};E.CreateText=function(bS){return E.Doc().createTextNode(bS);};E.Doc=function(){_6.$cctor();return _6.Doc;};E.CreateElement=function(bS){return E.Doc().createElement(bS);};E.ChildrenArray=function(bS){var bT,bU,bV;bT=[];for(bU=0,bV=bS.childNodes.length-1;bU<=bV;bU++)bT.push(bS.childNodes[bU]);return bT;};E.IterSelector=function(bS,bT,bU){var bV,bW,bX;bV=bS.querySelectorAll(bT);for(bW=0,bX=bV.length-1;bW<=bX;bW++)bU(bV[bW]);};E.InsertAt=function(bS,bT,bU){var bV;if(!(bU.parentNode===bS&&bT===(bV=bU.nextSibling,C.Equals(bV,null)?null:bV)))bS.insertBefore(bU,bT);};E.SetAttr=function(bS,bT,bU){bS.setAttribute(bT,bU);};E.RemoveNode=function(bS,bT){if(bT.parentNode===bS)bS.removeChild(bT);};F=h.ConcreteVar=bN.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bS){if(this.isConst)(function(bT){return bT("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bT){bO.log(bT);}));else{G.Obsolete(this.snap);this.current=bS;this.snap=G.New({$:2,$0:bS,$1:[]});}},UpdateMaybe:function(bS){var bT;bT=bS(this.Get());bT!=null&&bT.$==1?this.Set(bT.$0):void 0;}},u,F);F.New=bN.Ctor(function(bS,bT,bU){var bV;bV=this;u.New.call(this);this.isConst=bS;this.current=bU;this.snap=bT;this.view=function(){return bV.snap;};this.id=X.Int();},F);G.Map2=function(bS,bT,bU){var bV,bW,bX;function bY(bZ){var b0,b1,b2;if(!(b0=bX.s,b0!=null&&b0.$==0||b0!=null&&b0.$==2)){b1=G.ValueAndForever(bT);b2=G.ValueAndForever(bU);b1!=null&&b1.$==1?b2!=null&&b2.$==1?b1.$0[1]&&b2.$0[1]?G.MarkForever(bX,bS(b1.$0[0],b2.$0[0])):G.MarkReady(bX,bS(b1.$0[0],b2.$0[0])):void 0:void 0;}}bV=bT.s;bW=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?G.New({$:0,$0:bS(bV.$0,bW.$0)}):G.Map2Opt1(bS,bV.$0,bU):bW!=null&&bW.$==0?G.Map2Opt2(bS,bW.$0,bT):(bX=G.New({$:3,$0:[],$1:[]}),(G.When(bT,bY,bX),G.When(bU,bY,bX),bX));};G.Map=function(bS,bT){var bU,bV;bU=bT.s;return bU!=null&&bU.$==0?G.New({$:0,$0:bS(bU.$0)}):(bV=G.New({$:3,$0:[],$1:[]}),(G.When(bT,function(bW){G.MarkDone(bV,bT,bS(bW));},bV),bV));};G.Map2Unit=function(bS,bT){var bU,bV,bW;function bX(){var bY,bZ,b0;if(!(bY=bW.s,bY!=null&&bY.$==0||bY!=null&&bY.$==2)){bZ=G.ValueAndForever(bS);b0=G.ValueAndForever(bT);bZ!=null&&bZ.$==1?b0!=null&&b0.$==1?bZ.$0[1]&&b0.$0[1]?G.MarkForever(bW,null):G.MarkReady(bW,null):void 0:void 0;}}bU=bS.s;bV=bT.s;return bU!=null&&bU.$==0?bV!=null&&bV.$==0?G.New({$:0,$0:null}):bT:bV!=null&&bV.$==0?bS:(bW=G.New({$:3,$0:[],$1:[]}),(G.When(bS,bX,bW),G.When(bT,bX,bW),bW));};G.WhenObsoleteRun=function(bS,bT){var bU;bU=bS.s;bU==null?bT():bU!=null&&bU.$==2?bU.$1.push(bT):bU!=null&&bU.$==3?bU.$1.push(bT):void 0;};G.Map2Opt1=function(bS,bT,bU){return G.Map(function(bV){return bS(bT,bV);},bU);};G.Map2Opt2=function(bS,bT,bU){return G.Map(function(bV){return bS(bV,bT);},bU);};G.ValueAndForever=function(bS){var bT;bT=bS.s;return bT!=null&&bT.$==0?{$:1,$0:[bT.$0,true]}:bT!=null&&bT.$==2?{$:1,$0:[bT.$0,false]}:null;};G.MarkForever=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:0,$0:bT};bV=bU.$0;for(bW=0,bX=q.length(bV)-1;bW<=bX;bW++)(q.get(bV,bW))(bT);}else void 0;};G.MarkReady=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:2,$0:bT,$1:bU.$1};bV=bU.$0;for(bW=0,bX=q.length(bV)-1;bW<=bX;bW++)(q.get(bV,bW))(bT);}else void 0;};G.When=function(bS,bT,bU){var bV;bV=bS.s;bV==null?G.Obsolete(bU):bV!=null&&bV.$==2?(G.EnqueueSafe(bV.$1,bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),G.EnqueueSafe(bV.$1,bU)):bT(bV.$0);};G.MarkDone=function(bS,bT,bU){var bV;if(bV=bT.s,bV!=null&&bV.$==0)G.MarkForever(bS,bU);else G.MarkReady(bS,bU);};G.EnqueueSafe=function(bS,bT){var bU,bV,bW,bX;bS.push(bT);if(bS.length%20===0){bU=bS.slice(0);bp.Clear(bS);for(bV=0,bW=q.length(bU)-1;bV<=bW;bV++){bX=q.get(bU,bV);typeof bX=="object"?function(bY){if(bY.s)bS.push(bY);}(bX):function(bY){bS.push(bY);}(bX);}}else void 0;};G.WhenRun=function(bS,bT,bU){var bV;bV=bS.s;bV==null?bU():bV!=null&&bV.$==2?(bV.$1.push(bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),bV.$1.push(bU)):bT(bV.$0);};G.Copy=function(bS){var bT,bU,bV;bT=bS.s;return bT==null?bS:bT!=null&&bT.$==2?(bU=G.New({$:2,$0:bT.$0,$1:[]}),(G.WhenObsolete(bS,bU),bU)):bT!=null&&bT.$==3?(bV=G.New({$:3,$0:[],$1:[]}),(G.When(bS,function(bW){G.MarkDone(bV,bS,bW);},bV),bV)):bS;};G.WhenObsolete=function(bS,bT){var bU;bU=bS.s;bU==null?G.Obsolete(bT):bU!=null&&bU.$==2?G.EnqueueSafe(bU.$1,bT):bU!=null&&bU.$==3?G.EnqueueSafe(bU.$1,bT):void 0;};G.Map3=function(bS,bT,bU,bV){var bW,bX,bY,bZ;function b0(b1){var b2,b3,b4,b5;if(!(b2=bZ.s,b2!=null&&b2.$==0||b2!=null&&b2.$==2)){b3=G.ValueAndForever(bT);b4=G.ValueAndForever(bU);b5=G.ValueAndForever(bV);b3!=null&&b3.$==1?b4!=null&&b4.$==1?b5!=null&&b5.$==1?b3.$0[1]&&b4.$0[1]&&b5.$0[1]?G.MarkForever(bZ,bS(b3.$0[0],b4.$0[0],b5.$0[0])):G.MarkReady(bZ,bS(b3.$0[0],b4.$0[0],b5.$0[0])):void 0:void 0:void 0;}}bW=bT.s;bX=bU.s;bY=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?bY!=null&&bY.$==0?G.New({$:0,$0:bS(bW.$0,bX.$0,bY.$0)}):G.Map3Opt1(bS,bW.$0,bX.$0,bV):bY!=null&&bY.$==0?G.Map3Opt2(bS,bW.$0,bY.$0,bU):G.Map3Opt3(bS,bW.$0,bU,bV):bX!=null&&bX.$==0?bY!=null&&bY.$==0?G.Map3Opt4(bS,bX.$0,bY.$0,bT):G.Map3Opt5(bS,bX.$0,bT,bV):bY!=null&&bY.$==0?G.Map3Opt6(bS,bY.$0,bT,bU):(bZ=G.New({$:3,$0:[],$1:[]}),(G.When(bT,b0,bZ),G.When(bU,b0,bZ),G.When(bV,b0,bZ),bZ));};G.Sequence=function(bS){var bT,bU,bV;function bW(bX){var bY;if(bV[0]===0){bY=q.map(function(bZ){var b0;b0=bZ.s;return b0!=null&&b0.$==0?b0.$0:b0!=null&&b0.$==2?b0.$0:f.FailWith("value not found by View.Sequence");},bT);q.forall(function(bZ){var b0;b0=bZ.s;return b0!=null&&b0.$==0;},bT)?G.MarkForever(bU,bY):G.MarkReady(bU,bY);}else bV[0]--;}bT=q.ofSeq(bS);return bT.length==0?G.New({$:0,$0:[]}):(bU=G.New({$:3,$0:[],$1:[]}),(bV=[q.length(bT)-1],(q.iter(function(bX){G.When(bX,bW,bU);},bT),bU)));};G.Map3Opt1=function(bS,bT,bU,bV){return G.Map(function(bW){return bS(bT,bU,bW);},bV);};G.Map3Opt2=function(bS,bT,bU,bV){return G.Map(function(bW){return bS(bT,bW,bU);},bV);};G.Map3Opt3=function(bS,bT,bU,bV){return G.Map2(function(bW,bX){return bS(bT,bW,bX);},bU,bV);};G.Map3Opt4=function(bS,bT,bU,bV){return G.Map(function(bW){return bS(bW,bT,bU);},bV);};G.Map3Opt5=function(bS,bT,bU,bV){return G.Map2(function(bW,bX){return bS(bW,bT,bX);},bU,bV);};G.Map3Opt6=function(bS,bT,bU,bV){return G.Map2(function(bW,bX){return bS(bW,bX,bT);},bU,bV);};I=H.List=bN.Class({GetEnumerator:function(){return U.Get(this);},GetEnumerator0:function(){return U.Get0(this);}},null,I);K.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bS){var bT,bU;bT=bQ.random()*16|0;bU=bS=="x"?bT:bT&3|8;return bU.toString(16);});};L=H.Dictionary=bN.Class({set_Item:function(bS,bT){this.set(bS,bT);},set:function(bS,bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bS);bW=this.data[bV];bW==null?(this.count=this.count+1,this.data[bV]=new a.Array({K:bS,V:bT})):(bX=q.tryFindIndex(function(bY){return bU.equals.apply(null,[(f.KeyValue(bY))[0],bS]);},bW),bX==null?(this.count=this.count+1,bW.push({K:bS,V:bT})):bW[bX.$0]={K:bS,V:bT});},ContainsKey:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?false:q.exists(function(bV){return bT.equals.apply(null,[(f.KeyValue(bV))[0],bS]);},bU);},TryGetValue:function(bS,bT){var bU,bV,bW;bU=this;bV=this.data[this.hash(bS)];return bV==null?false:(bW=q.tryPick(function(bX){var bY;bY=f.KeyValue(bX);return bU.equals.apply(null,[bY[0],bS])?{$:1,$0:bY[1]}:null;},bV),bW!=null&&bW.$==1&&(bT.set(bW.$0),true));},Remove:function(bS){return this.remove(bS);},get_Keys:function(){return new bb.New(this);},remove:function(bS){var bT,bU,bV,bW;bT=this;bU=this.hash(bS);bV=this.data[bU];return bV==null?false:(bW=q.filter(function(bX){return!bT.equals.apply(null,[(f.KeyValue(bX))[0],bS]);},bV),q.length(bW)<bV.length&&(this.count=this.count-1,this.data[bU]=bW,true));},get_Item:function(bS){return this.get(bS);},get:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?Y.notPresent():q.pick(function(bV){var bW;bW=f.KeyValue(bV);return bT.equals.apply(null,[bW[0],bS])?{$:1,$0:bW[1]}:null;},bU);},GetEnumerator:function(){return U.Get0(this);},GetEnumerator0:function(){return U.Get0(q.concat(R.GetFieldValues(this.data)));}},g,L);L.New$5=bN.Ctor(function(){L.New$6.call(this,[],C.Equals,C.Hash);},L);L.New$6=bN.Ctor(function(bS,bT,bU){var bV,bW;g.New.call(this);this.equals=bT;this.hash=bU;this.count=0;this.data=[];bV=U.Get(bS);try{while(bV.MoveNext()){bW=bV.Current();this.set(bW.K,bW.V);}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},L);M=H.HashSet=bN.Class({Add:function(bS){return this.add(bS);},Contains:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrContains(bS,bT);},add:function(bS){var bT,bU;bT=this.hash(bS);bU=this.data[bT];return bU==null?(this.data[bT]=[bS],this.count=this.count+1,true):this.arrContains(bS,bU)?false:(bU.push(bS),this.count=this.count+1,true);},arrContains:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS]))bU=false;else bV=bV+1;return!bU;},ExceptWith:function(bS){var bT;bT=U.Get(bS);try{while(bT.MoveNext())this.Remove(bT.Current());}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bS){var bT,bU,bV,bW;bT=0;bU=bn.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++)q.set(bS,bV,bU[bV]);},IntersectWith:function(bS){var bT,bU,bV,bW,bX;bT=new M.New$4(bS,this.equals,this.hash);bU=bn.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];!bT.Contains(bX)?this.Remove(bX):void 0;}},Remove:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrRemove(bS,bT)&&(this.count=this.count-1,true);},arrRemove:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS])){bT.splice.apply(bT,[bV,1]);bU=false;}else bV=bV+1;return!bU;},GetEnumerator:function(){return U.Get(bn.concat(this.data));},GetEnumerator0:function(){return U.Get(bn.concat(this.data));}},g,M);M.New$3=bN.Ctor(function(){M.New$4.call(this,[],C.Equals,C.Hash);},M);M.New$4=bN.Ctor(function(bS,bT,bU){var bV;g.New.call(this);this.equals=bT;this.hash=bU;this.data=[];this.count=0;bV=U.Get(bS);try{while(bV.MoveNext())this.add(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},M);M.New$2=bN.Ctor(function(bS){M.New$4.call(this,bS,C.Equals,C.Hash);},M);N.Box=a.id;O.append=function(bS,bT){return{GetEnumerator:function(){var bU,bV;bU=U.Get(bS);bV=[true];return new Z.New(bU,null,function(bW){var bX;return bW.s.MoveNext()?(bW.c=bW.s.Current(),true):(bX=bW.s,!C.Equals(bX,null)?bX.Dispose():void 0,bW.s=null,bV[0]&&(bV[0]=false,bW.s=U.Get(bT),bW.s.MoveNext()?(bW.c=bW.s.Current(),true):(bW.s.Dispose(),bW.s=null,false)));},function(bW){var bX;bX=bW.s;!C.Equals(bX,null)?bX.Dispose():void 0;});}};};O.head=function(bS){var bT;bT=U.Get(bS);try{return bT.MoveNext()?bT.Current():O.insufficient();}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};O.fold=function(bS,bT,bU){var bV,bW;bV=bT;bW=U.Get(bU);try{while(bW.MoveNext())bV=bS(bV,bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};O.iter=function(bS,bT){var bU;bU=U.Get(bT);try{while(bU.MoveNext())bS(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};O.map=function(bS,bT){return{GetEnumerator:function(){var bU;bU=U.Get(bT);return new Z.New(null,null,function(bV){return bU.MoveNext()&&(bV.c=bS(bU.Current()),true);},function(){bU.Dispose();});}};};O.max=function(bS){var bT,bU,bV;bT=U.Get(bS);try{if(!bT.MoveNext())O.seqEmpty();bU=bT.Current();while(bT.MoveNext()){bV=bT.Current();C.Compare(bV,bU)===1?bU=bV:void 0;}return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};O.forall=function(bS,bT){return!O.exists(function(bU){return!bS(bU);},bT);};O.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};O.exists=function(bS,bT){var bU,bV;bU=U.Get(bT);try{bV=false;while(!bV&&bU.MoveNext())bV=bS(bU.Current());return bV;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};P.DynamicCustom=function(bS,bT){return _2.Dynamic(bT,bS);};P.Handler=function(bS,bT){return _2.Static(function(bU){bU.addEventListener(bS,function(bV){return(bT(bU))(bV);},false);});};P.OnAfterRender=function(bS){return new V({$:4,$0:bS});};P.Value=function(bS){function bT(bU){return{$:1,$0:bU};}return P.CustomValue(bS,a.id,function(bU){return bT(a.id(bU));});};P.Checked=function(bS){function bT(bU,bV){return!C.Equals(bS.Get(),bU.checked)?bS.Set(bU.checked):null;}return V.Concat([P.DynamicProp("checked",bS.get_View()),P.Handler("change",function(bU){return function(bV){return bT(bU,bV);};})]);};P.IntValue=function(bS){return P.CustomVar(bS,function(bT,bU){var bV;bV=bU.get_Input();return bT.value!==bV?void(bT.value=bV):null;},function(bT){var bU,bV,bW;bU=bT.value;return{$:1,$0:bt.isBlank(bU)?(bT.checkValidity?bT.checkValidity():true)?new _0({$:2,$0:bU}):new _0({$:1,$0:bU}):(bV=(bW=0,[_1.TryParseInt32(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]),bV[0]?new _0({$:0,$0:bV[1],$1:bU}):new _0({$:1,$0:bU}))};});};P.IntValueUnchecked=function(bS){return P.CustomValue(bS,a.String,function(bT){var bU;return bt.isBlank(bT)?{$:1,$0:0}:(bU=+bT,bU!==bU>>0?null:{$:1,$0:bU});});};P.FloatValue=function(bS){return P.CustomVar(bS,function(bT,bU){var bV;bV=bU.get_Input();return bT.value!==bV?void(bT.value=bV):null;},function(bT){var bU,bV;bU=bT.value;return{$:1,$0:bt.isBlank(bU)?(bT.checkValidity?bT.checkValidity():true)?new _0({$:2,$0:bU}):new _0({$:1,$0:bU}):(bV=+bU,a.isNaN(bV)?new _0({$:1,$0:bU}):new _0({$:0,$0:bV,$1:bU}))};});};P.FloatValueUnchecked=function(bS){return P.CustomValue(bS,a.String,function(bT){var bU;return bt.isBlank(bT)?{$:1,$0:0}:(bU=+bT,a.isNaN(bU)?null:{$:1,$0:bU});});};P.Dynamic=function(bS,bT){return _2.Dynamic(bT,function(bU){return function(bV){return E.SetAttr(bU,bS,bV);};});};P.CustomValue=function(bS,bT,bU){return P.CustomVar(bS,function(bV,bW){bV.value=bT(bW);},function(bV){return bU(bV.value);});};P.DynamicProp=function(bS,bT){return _2.Dynamic(bT,function(bU){return function(bV){bU[bS]=bV;};});};P.CustomVar=function(bS,bT,bU){function bV(bX,bY){return bS.UpdateMaybe(function(bZ){var b0,b1;b0=bU(bX);return b0!=null&&b0.$==1&&(!C.Equals(b0.$0,bZ)&&(b1=[b0,b0.$0],true))?b1[0]:null;});}function bW(bX,bY){var bZ,b0;bZ=bU(bX);return bZ!=null&&bZ.$==1&&(C.Equals(bZ.$0,bY)&&(b0=bZ.$0,true))?null:bT(bX,bY);}return V.Concat([P.Handler("change",function(bX){return function(bY){return bV(bX,bY);};}),P.Handler("input",function(bX){return function(bY){return bV(bX,bY);};}),P.Handler("keypress",function(bX){return function(bY){return bV(bX,bY);};}),P.DynamicCustom(function(bX){return function(bY){return bW(bX,bY);};},bS.get_View())]);};R.GetFieldValues=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push(bS[bV]);return bT;};S=h.DocElemNode=bN.Class({Equals:function(bS){return this.ElKey===bS.ElKey;},GetHashCode:function(){return this.ElKey;}},null,S);S.New=function(bS,bT,bU,bV,bW,bX){var bY;return new S((bY={Attr:bS,Children:bT,El:bV,ElKey:bW},(bN.SetOptional(bY,"Delimiters",bU),bN.SetOptional(bY,"Render",bX),bY)));};A.head=function(bS){return bS.$==1?bS.$0:A.listEmpty();};A.tail=function(bS){return bS.$==1?bS.$1:A.listEmpty();};A.listEmpty=function(){return f.FailWith("The input list was empty.");};U.Get=function(bS){return bS instanceof a.Array?U.ArrayEnumerator(bS):C.Equals(typeof bS,"string")?U.StringEnumerator(bS):bS.GetEnumerator();};U.ArrayEnumerator=function(bS){return new Z.New(0,null,function(bT){var bU;bU=bT.s;return bU<q.length(bS)&&(bT.c=q.get(bS,bU),bT.s=bU+1,true);},void 0);};U.StringEnumerator=function(bS){return new Z.New(0,null,function(bT){var bU;bU=bT.s;return bU<bS.length&&(bT.c=bS[bU],bT.s=bU+1,true);},void 0);};U.Get0=function(bS){return bS instanceof a.Array?U.ArrayEnumerator(bS):C.Equals(typeof bS,"string")?U.StringEnumerator(bS):"GetEnumerator0"in bS?bS.GetEnumerator0():bS.GetEnumerator();};V=h.AttrProxy=bN.Class({},null,V);V.Concat=function(bS){var bT;bT=j.ofSeqNonCopying(bS);return j.TreeReduce(_2.EmptyAttr(),V.Append,bT);};V.Append=function(bS,bT){return _2.AppendTree(bS,bT);};V.Handler=function(bS,bT){return V.HandlerImpl(bS,bT);};V.Create=function(bS,bT){return _2.Static(function(bU){E.SetAttr(bU,bS,bT);});};V.HandlerImpl=function(bS,bT){return _2.Static(function(bU){bU.addEventListener(bS,function(bV){return(bT(bU))(bV);},false);});};X.Int=function(){X.set_counter(X.counter()+1);return X.counter();};X.set_counter=function(bS){bg.$cctor();bg.counter=bS;};X.counter=function(){bg.$cctor();return bg.counter;};G.Obsolete=function(bS){var bT,bU,bV,bW,bX;bU=bS.s;if(bU==null||(bU!=null&&bU.$==2?(bT=bU.$1,false):bU!=null&&bU.$==3?(bT=bU.$1,false):true))void 0;else{bS.s=null;for(bV=0,bW=q.length(bT)-1;bV<=bW;bV++){bX=q.get(bT,bV);typeof bX=="object"?function(bY){G.Obsolete(bY);}(bX):bX();}}};G.New=function(bS){return{s:bS};};Y.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};Z=U.T=bN.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},g,Z);Z.New=bN.Ctor(function(bS,bT,bU,bV){g.New.call(this);this.s=bS;this.c=bT;this.n=bU;this.d=bV;},Z);_0=h.CheckedInput=bN.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,_0);_1.TryParseInt32=function(bS,bT){return _1.TryParse(bS,-2147483648,2147483647,bT);};_2.Dynamic=function(bS,bT){return new V({$:1,$0:new _.New(bS,bT)});};_2.Updates=function(bS){return j.MapTreeReduce(function(bT){return bT.NChanged();},l.Const(),l.Map2Unit,bS.DynNodes);};_2.AppendTree=function(bS,bT){var bU;return bS===null?bT:bT===null?bS:(bU=new V({$:2,$0:bS,$1:bT}),(_2.SetFlags(bU,_2.Flags(bS)|_2.Flags(bT)),bU));};_2.EmptyAttr=function(){bo.$cctor();return bo.EmptyAttr;};_2.Insert=function(bS,bT){var bU,bV,bW;function bX(bY){if(!(bY===null))if(bY!=null&&bY.$==1)bU.push(bY.$0);else if(bY!=null&&bY.$==2){bX(bY.$0);bX(bY.$1);}else if(bY!=null&&bY.$==3)bY.$0(bS);else if(bY!=null&&bY.$==4)bV.push(bY.$0);}bU=[];bV=[];bX(bT);bW=bU.slice(0);return _8.New(bS,_2.Flags(bT),bW,bV.length===0?null:{$:1,$0:function(bY){O.iter(function(bZ){bZ(bY);},bV);}});};_2.SetFlags=function(bS,bT){bS.flags=bT;};_2.Flags=function(bS){return bS!==null&&bS.hasOwnProperty("flags")?bS.flags:0;};_2.Empty=function(bS){return _8.New(bS,0,[],null);};_2.HasExitAnim=function(bS){var bT;bT=2;return(bS.DynFlags&bT)===bT;};_2.GetExitAnim=function(bS){return _2.GetAnim(bS,function(bT,bU){return bT.NGetExitAnim(bU);});};_2.HasEnterAnim=function(bS){var bT;bT=1;return(bS.DynFlags&bT)===bT;};_2.GetEnterAnim=function(bS){return _2.GetAnim(bS,function(bT,bU){return bT.NGetEnterAnim(bU);});};_2.HasChangeAnim=function(bS){var bT;bT=4;return(bS.DynFlags&bT)===bT;};_2.GetChangeAnim=function(bS){return _2.GetAnim(bS,function(bT,bU){return bT.NGetChangeAnim(bU);});};_2.Static=function(bS){return new V({$:3,$0:bS});};_2.GetAnim=function(bS,bT){return bc.Concat(q.map(function(bU){return bT(bU,bS.DynElem);},bS.DynNodes));};_2.Sync=function(bS,bT){q.iter(function(bU){bU.NSync(bS);},bT.DynNodes);};_3.CreateTextNode=function(){return{Text:E.CreateText(""),Dirty:false,Value:""};};_3.UpdateTextNode=function(bS,bT){bS.Value=bT;bS.Dirty=true;};_3.LinkElement=function(bS,bT){_3.InsertDoc(bS,bT,null);};_3.InsertDoc=function(bS,bT,bU){var bV;return bT!=null&&bT.$==1?_3.InsertNode(bS,bT.$0.El,bU):bT!=null&&bT.$==2?(bV=bT.$0,(bV.Dirty=false,_3.InsertDoc(bS,bV.Current,bU))):bT==null?bU:bT!=null&&bT.$==4?_3.InsertNode(bS,bT.$0.Text,bU):bT!=null&&bT.$==5?_3.InsertNode(bS,bT.$0,bU):bT!=null&&bT.$==6?q.foldBack(function(bW,bX){return bW==null||bW.constructor===D?_3.InsertDoc(bS,bW,bX):_3.InsertNode(bS,bW,bX);},bT.$0.Els,bU):_3.InsertDoc(bS,bT.$0,_3.InsertDoc(bS,bT.$1,bU));};_3.CreateRunState=function(bS,bT){return bj.New(bk.get_Empty(),_3.CreateElemNode(bS,_2.EmptyAttr(),bT));};_3.PerformAnimatedUpdate=function(bS,bT,bU){var bV;return bc.get_UseAnimations()?(bV=null,br.Delay(function(){var bW,bX,bY;bW=bk.FindAll(bU);bX=_3.ComputeChangeAnim(bT,bW);bY=_3.ComputeEnterAnim(bT,bW);return br.Bind(bc.Play(bc.Append(bX,_3.ComputeExitAnim(bT,bW))),function(){return br.Bind(_3.SyncElemNodesNextFrame(bS,bT),function(){return br.Bind(bc.Play(bY),function(){bT.PreviousNodes=bW;return br.Return(null);});});});})):_3.SyncElemNodesNextFrame(bS,bT);};_3.PerformSyncUpdate=function(bS,bT,bU){var bV;bV=bk.FindAll(bU);_3.SyncElemNode(bS,bT.Top);bT.PreviousNodes=bV;};_3.CreateElemNode=function(bS,bT,bU){var bV;_3.LinkElement(bS,bU);bV=_2.Insert(bS,bT);return S.New(bV,bU,null,bS,X.Int(),bN.GetOptional(bV.OnAfterRender));};_3.InsertNode=function(bS,bT,bU){E.InsertAt(bS,bU,bT);return bT;};_3.SyncElemNodesNextFrame=function(bS,bT){function bU(bV){a.requestAnimationFrame(function(){_3.SyncElemNode(bS,bT.Top);bV();});}return bd.BatchUpdatesEnabled()?br.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);}):(_3.SyncElemNode(bS,bT.Top),br.Return(null));};_3.ComputeExitAnim=function(bS,bT){return bc.Concat(q.map(function(bU){return _2.GetExitAnim(bU.Attr);},bk.ToArray(bk.Except(bT,bk.Filter(function(bU){return _2.HasExitAnim(bU.Attr);},bS.PreviousNodes)))));};_3.ComputeEnterAnim=function(bS,bT){return bc.Concat(q.map(function(bU){return _2.GetEnterAnim(bU.Attr);},bk.ToArray(bk.Except(bS.PreviousNodes,bk.Filter(function(bU){return _2.HasEnterAnim(bU.Attr);},bT)))));};_3.ComputeChangeAnim=function(bS,bT){var bU;function bV(bW){return _2.HasChangeAnim(bW.Attr);}bU=function(bW){return bk.Filter(bV,bW);};return bc.Concat(q.map(function(bW){return _2.GetChangeAnim(bW.Attr);},bk.ToArray(bk.Intersect(bU(bS.PreviousNodes),bU(bT)))));};_3.SyncElemNode=function(bS,bT){!bS?_3.SyncElement(bT):void 0;_3.Sync(bT.Children);_3.AfterRender(bT);};_3.InsertBeforeDelim=function(bS,bT){var bU,bV;bU=bS.parentNode;bV=self.document.createTextNode("");bU.insertBefore(bV,bS);_3.LinkPrevElement(bS,bT);return bV;};_3.SyncElement=function(bS){function bT(bU){function bV(bW){var bX,bY;return bW!=null&&bW.$==0?bV(bW.$0)||bV(bW.$1):bW!=null&&bW.$==2?(bX=bW.$0,bX.Dirty||bV(bX.Current)):bW!=null&&bW.$==6&&(bY=bW.$0,bY.Dirty||q.exists(bT,bY.Holes));}return bV(bU.Children);}_2.Sync(bS.El,bS.Attr);bT(bS)?_3.DoSyncElement(bS):void 0;};_3.Sync=function(bS){var bT,bU;if(bS!=null&&bS.$==1)_3.SyncElemNode(false,bS.$0);else if(bS!=null&&bS.$==2)_3.Sync(bS.$0.Current);else if(bS==null);else if(bS!=null&&bS.$==5);else if(bS!=null&&bS.$==4){bT=bS.$0;bT.Dirty?(bT.Text.nodeValue=bT.Value,bT.Dirty=false):void 0;}else if(bS!=null&&bS.$==6){bU=bS.$0;q.iter(function(bV){_3.SyncElemNode(false,bV);},bU.Holes);q.iter(function(bV){_2.Sync(bV[0],bV[1]);},bU.Attrs);_3.AfterRender(bU);}else{_3.Sync(bS.$0);_3.Sync(bS.$1);}};_3.AfterRender=function(bS){var bT;bT=bN.GetOptional(bS.Render);bT!=null&&bT.$==1?(bT.$0(bS.El),bN.SetOptional(bS,"Render",null)):void 0;};_3.LinkPrevElement=function(bS,bT){_3.InsertDoc(bS.parentNode,bT,bS);};_3.DoSyncElement=function(bS){var bT,bU,bV;function bW(bX,bY){var bZ,b0;return bX!=null&&bX.$==1?bX.$0.El:bX!=null&&bX.$==2?(bZ=bX.$0,bZ.Dirty?(bZ.Dirty=false,_3.InsertDoc(bT,bZ.Current,bY)):bW(bZ.Current,bY)):bX==null?bY:bX!=null&&bX.$==4?bX.$0.Text:bX!=null&&bX.$==5?bX.$0:bX!=null&&bX.$==6?(b0=bX.$0,(b0.Dirty?b0.Dirty=false:void 0,q.foldBack(function(b1,b2){return b1==null||b1.constructor===D?bW(b1,b2):b1;},b0.Els,bY))):bW(bX.$0,bW(bX.$1,bY));}bT=bS.El;bC.Iter((bU=bS.El,function(bX){E.RemoveNode(bU,bX);}),bC.Except(bC.DocChildren(bS),bC.Children(bS.El,bN.GetOptional(bS.Delimiters))));bW(bS.Children,(bV=bN.GetOptional(bS.Delimiters),bV!=null&&bV.$==1?bV.$0[1]:null));};_4.$cctor=function(){_4.$cctor=a.ignore;_4.LoadedTemplates=new L.New$5();_4.LocalTemplatesLoaded=false;_4.TextHoleRE="\\${([^}]+)}";};_6.$cctor=function(){_6.$cctor=a.ignore;_6.Doc=self.document;};_8.New=function(bS,bT,bU,bV){var bW;bW={DynElem:bS,DynFlags:bT,DynNodes:bU};bN.SetOptional(bW,"OnAfterRender",bV);return bW;};_9=h.Elt=bN.Class({},i,_9);_9.New=function(bS,bT,bU){var bV,bW;bV=_3.CreateElemNode(bS,bT,bU.docNode);bW=bf.Create(bU.updates);return new _9.New$1({$:1,$0:bV},l.Map2Unit(_2.Updates(bV.Attr),bW.v),bS,bW);};_9.TreeNode=function(bS,bT){var bU,bV;function bW(bX){return bX[1];}bU=bf.Create(bT);return new _9.New$1({$:6,$0:bS},l.Map2Unit((bV=q.map(function(bX){return _2.Updates(bW(bX));},bS.Attrs),j.TreeReduce(l.Const(),l.Map2Unit,bV)),bU.v),q.get(bS.Els,0),bU);};_9.New$1=bN.Ctor(function(bS,bT,bU,bV){i.New.call(this,bS,bT);this.docNode$1=bS;this.updates$1=bT;this.elt=bU;this.rvUpdates=bV;},_9);_=h.DynamicAttrNode=bN.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bS){return bc.get_Empty();},NGetEnterAnim:function(bS){return bc.get_Empty();},NGetChangeAnim:function(bS){return bc.get_Empty();},NSync:function(bS){if(this.dirty){(this.push(bS))(this.value);this.dirty=false;}}},g,_);_.New=bN.Ctor(function(bS,bT){var bU;bU=this;g.New.call(this);this.push=bT;this.value=void 0;this.dirty=false;this.updates=l.Map(function(bV){bU.value=bV;bU.dirty=true;},bS);},_);$.convertTextNode=function(bS){var bT,bU,bV,bW,bX,bY;bT=null;bU=0;bW=bS.textContent;bX=new a.RegExp(x.TextHoleRE(),"g");while(bT=bX.exec(bW),bT!==null){bS.parentNode.insertBefore(self.document.createTextNode(ba.string(bW,{$:1,$0:bU},{$:1,$0:bX.lastIndex-q.get(bT,0).length-1})),bS);bU=bX.lastIndex;bY=self.document.createElement("span");bY.setAttribute("ws-replace",q.get(bT,1).toLowerCase());bS.parentNode.insertBefore(bY,bS);}bX.lastIndex=0;bS.textContent=ba.string(bW,{$:1,$0:bU},null);};$.failNotLoaded=function(bS){bO.warn("Instantiating non-loaded template",bS);};$.fillTextHole=function(bS,bT,bU){var bV;bV=bS.querySelector("[ws-replace]");return C.Equals(bV,null)?(bO.warn("Filling non-existent text hole",bU),null):(bV.parentNode.replaceChild(new a.Text(bT),bV),{$:1,$0:bV.getAttribute("ws-replace")});};$.removeHolesExcept=function(bS,bT){function bU(bV){E.IterSelector(bS,"["+bV+"]",function(bW){if(!bT.Contains(bW.getAttribute(bV)))bW.removeAttribute(bV);});}bU("ws-attr");bU("ws-onafterrender");bU("ws-var");E.IterSelector(bS,"[ws-hole]",function(bV){if(!bT.Contains(bV.getAttribute("ws-hole"))){bV.removeAttribute("ws-hole");while(bV.hasChildNodes())bV.removeChild(bV.lastChild);}});E.IterSelector(bS,"[ws-replace]",function(bV){if(!bT.Contains(bV.getAttribute("ws-replace")))bV.parentNode.removeChild(bV);});E.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bh.concat(" ",q.filter(function(bW){return bT.Contains(q.get(bh.SplitChars(bW,[":"],1),1));},bh.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});E.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY,bZ,b0;bW=bh.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=q.get(bW,bX);bV.setAttribute(bZ,(b0=new a.RegExp(x.TextHoleRE(),"g"),bV.getAttribute(bZ).replace(b0,function(b1,b2){return bT.Contains(b2)?b1:"";})));}});};$.fillInstanceAttrs=function(bS,bT){var bU,bV,bW,bX,bY;$.convertAttrs(bT);bU=bT.nodeName.toLowerCase();bV=bS.querySelector("[ws-attr="+bU+"]");if(C.Equals(bV,null))bO.warn("Filling non-existent attr hole",bU);else{bV.removeAttribute("ws-attr");for(bW=0,bX=bT.attributes.length-1;bW<=bX;bW++){bY=bT.attributes.item(bW);bY.name==="class"&&bV.hasAttribute("class")?bV.setAttribute("class",bV.getAttribute("class")+" "+bY.nodeValue):bV.setAttribute(bY.name,bY.nodeValue);}}};$.mapHoles=function(bS,bT){function bU(bV){E.IterSelector(bS,"["+bV+"]",function(bW){var bX,bY;bX=(bY=null,[bT.TryGetValue(bW.getAttribute(bV).toLowerCase(),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bW.setAttribute(bV,bX[1]):void 0;});}bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");E.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bh.concat(" ",q.map(function(bW){var bX,bY,bZ;bX=bh.SplitChars(bW,[":"],1);bY=(bZ=null,[bT.TryGetValue(q.get(bX,1),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);return bY[0]?q.get(bX,0)+":"+bY[1]:bW;},bh.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});E.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY;bW=bh.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++)(function(){var bZ;function b0(b1,b2){var b3;b3=f.KeyValue(b2);return b1.replace(new a.RegExp("\\${"+b3[0]+"}","ig"),"${"+b3[1]+"}");}bZ=q.get(bW,bX);return bV.setAttribute(bZ,(((bN.Curried3(O.fold))(b0))(bV.getAttribute(bZ)))(bT));}());});};$.fill=function(bS,bT,bU){while(true)if(bS.hasChildNodes())bU=bT.insertBefore(bS.lastChild,bU);else return null;};$.convertAttrs=function(bS){var bU,bV,bW,bX,bY,bZ,b0,b1;function bT(b2){var b3;b3=bS.getAttribute(b2);b3===null?void 0:bS.setAttribute(b2,b3.toLowerCase());}bU=bS.attributes;bV=[];bW=[];bX=[];for(bY=0,bZ=bU.length-1;bY<=bZ;bY++){b0=bU.item(bY);bh.StartsWith(b0.nodeName,"ws-on")&&b0.nodeName!=="ws-onafterrender"&&b0.nodeName!=="ws-on"?(bV.push(b0.nodeName),bW.push(ba.string(b0.nodeName,{$:1,$0:"ws-on".length},null)+":"+b0.nodeValue.toLowerCase())):!bh.StartsWith(b0.nodeName,"ws-")&&(new a.RegExp(x.TextHoleRE())).test(b0.nodeValue)?(b0.nodeValue=(b1=new a.RegExp(x.TextHoleRE(),"g"),b0.nodeValue.replace(b1,function(b2,b3){return"${"+b3.toLowerCase()+"}";})),bX.push(b0.nodeName)):void 0;}!(bW.length==0)?bS.setAttribute("ws-on",bh.concat(" ",bW)):void 0;!(bX.length==0)?bS.setAttribute("ws-attr-holes",bh.concat(" ",bX)):void 0;bT("ws-hole");bT("ws-replace");bT("ws-attr");bT("ws-onafterrender");bT("ws-var");q.iter(function(b2){bS.removeAttribute(b2);},bV);};ba.string=function(bS,bT,bU){return bT==null?bU!=null&&bU.$==1?bS.slice(0,bU.$0+1):"":bU==null?bS.slice(bT.$0):bS.slice(bT.$0,bU.$0+1);};O.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};bb=H.KeyCollection=bN.Class({GetEnumerator$1:function(){return U.Get(O.map(function(bS){return bS.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},g,bb);bb.New=bN.Ctor(function(bS){g.New.call(this);this.d=bS;},bb);bc.get_UseAnimations=function(){return bl.UseAnimations();};bc.Play=function(bS){var bT;bT=null;return br.Delay(function(){return br.Bind(bc.Run(a.ignore,bl.Actions(bS)),function(){bl.Finalize(bS);return br.Return(null);});});};bc.Append=function(bS,bT){return{$:0,$0:bs.Append(bS.$0,bT.$0)};};bc.Run=function(bS,bT){var bU;function bV(bW){function bX(bY,bZ){var b0;b0=bZ-bY;bT.Compute(b0);bS();return b0<=bU?void a.requestAnimationFrame(function(b1){bX(bY,b1);}):bW();}a.requestAnimationFrame(function(bY){bX(bY,bY);});}bU=bT.Duration;return bU===0?br.Zero():br.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);});};bc.Concat=function(bS){return{$:0,$0:bs.Concat(O.map(bl.List,bS))};};bc.get_Empty=function(){return{$:0,$0:bs.Empty()};};bd.BatchUpdatesEnabled=function(){bm.$cctor();return bm.BatchUpdatesEnabled;};be.StartProcessor=function(bS){var bT;function bU(){var bV;bV=null;return br.Delay(function(){return br.Bind(bS,function(){var bW;bW=bT[0];return bW===1?(bT[0]=0,br.Zero()):bW===2?(bT[0]=1,bU()):br.Zero();});});}bT=[0];return function(){var bV;bV=bT[0];bV===0?(bT[0]=1,br.Start(bU(),null)):bV===1?bT[0]=2:void 0;};};bf=h.Updates=bN.Class({},null,bf);bf.Create=function(bS){var bT;bT=null;bT=bf.New(bS,null,function(){var bU;bU=bT.s;return bU===null?(bU=G.Copy(bT.c()),bT.s=bU,G.WhenObsoleteRun(bU,function(){bT.s=null;}),bU):bU;});return bT;};bf.New=function(bS,bT,bU){return new bf({c:bS,s:bT,v:bU});};bg.$cctor=function(){bg.$cctor=a.ignore;bg.counter=0;};bh.concat=function(bS,bT){return q.ofSeq(bT).join(bS);};bh.SplitChars=function(bS,bT,bU){return bh.Split(bS,new a.RegExp("["+bh.RegexEscape(bT.join(""))+"]"),bU);};bh.StartsWith=function(bS,bT){return bS.substring(0,bT.length)==bT;};bh.Split=function(bS,bT,bU){return bU===1?q.filter(function(bV){return bV!=="";},bh.SplitWith(bS,bT)):bh.SplitWith(bS,bT);};bh.RegexEscape=function(bS){return bS.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bh.SplitWith=function(bS,bT){return bS.split(bT);};bh.forall=function(bS,bT){return O.forall(bS,bh.protect(bT));};bh.protect=function(bS){return bS===null?"":bS;};bj.New=function(bS,bT){return{PreviousNodes:bS,Top:bT};};bk.get_Empty=function(){return{$:0,$0:new M.New$3()};};bk.FindAll=function(bS){var bT;function bU(bW){if(bW!=null&&bW.$==0){bU(bW.$0);bU(bW.$1);}else if(bW!=null&&bW.$==1)bV(bW.$0);else if(bW!=null&&bW.$==2)bU(bW.$0.Current);else if(bW!=null&&bW.$==6)q.iter(bV,bW.$0.Holes);}function bV(bW){bT.push(bW);bU(bW.Children);}bT=[];bU(bS);return{$:0,$0:new M.New$2(bT)};};bk.Filter=function(bS,bT){return{$:0,$0:by.Filter(bS,bT.$0)};};bk.Except=function(bS,bT){return{$:0,$0:by.Except(bS.$0,bT.$0)};};bk.ToArray=function(bS){return by.ToArray(bS.$0);};bk.Intersect=function(bS,bT){return{$:0,$0:by.Intersect(bS.$0,bT.$0)};};bl.UseAnimations=function(){bq.$cctor();return bq.UseAnimations;};bl.Actions=function(bS){return bl.ConcatActions(q.choose(function(bT){return bT.$==1?{$:1,$0:bT.$0}:null;},bs.ToArray(bS.$0)));};bl.Finalize=function(bS){q.iter(function(bT){if(bT.$==0)bT.$0();},bs.ToArray(bS.$0));};bl.ConcatActions=function(bS){var bT,bU,bV,bW;bT=j.ofSeqNonCopying(bS);bU=q.length(bT);return bU===0?bl.Const():bU===1?q.get(bT,0):(bV=O.max(O.map(function(bX){return bX.Duration;},bT)),(bW=q.map(function(bX){return bl.Prolong(bV,bX);},bT),bl.Def(bV,function(bX){q.iter(function(bY){bY.Compute(bX);},bW);})));};bl.List=function(bS){return bS.$0;};bl.Const=function(bS){return bl.Def(0,function(){return bS;});};bl.Def=function(bS,bT){return{Compute:bT,Duration:bS};};bl.Prolong=function(bS,bT){var bU,bV,bW;bU=bT.Compute;bV=bT.Duration;bW=bF.Create(function(){return bT.Compute(bT.Duration);});return{Compute:function(bX){return bX>=bV?bW.f():bU(bX);},Duration:bS};};bm.$cctor=function(){bm.$cctor=a.ignore;bm.BatchUpdatesEnabled=true;};bn.concat=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push.apply(bT,bS[bV]);return bT;};bo.$cctor=function(){bo.$cctor=a.ignore;bo.EmptyAttr=null;};bp.Clear=function(bS){bS.splice(0,q.length(bS));};bq.$cctor=function(){bq.$cctor=a.ignore;bq.CubicInOut=bu.Custom(function(bS){var bT;bT=bS*bS;return 3*bT-2*(bT*bS);});bq.UseAnimations=true;};br.Delay=function(bS){return function(bT){try{(bS(null))(bT);}catch(bU){bT.k({$:1,$0:bU});}};};br.Bind=function(bS,bT){return br.checkCancel(function(bU){bS(bv.New(function(bV){var bW;if(bV.$==0){bW=bV.$0;br.scheduler().Fork(function(){try{(bT(bW))(bU);}catch(bX){bU.k({$:1,$0:bX});}});}else br.scheduler().Fork(function(){bU.k(bV);});},bU.ct));});};br.Zero=function(){bw.$cctor();return bw.Zero;};br.Start=function(bS,bT){var bU,bV;bU=(bV=(br.defCTS())[0],bT==null?bV:bT.$0);br.scheduler().Fork(function(){if(!bU.c)bS(bv.New(function(bW){if(bW.$==1)br.UncaughtAsyncError(bW.$0);},bU));});};br.Return=function(bS){return function(bT){bT.k({$:0,$0:bS});};};br.checkCancel=function(bS){return function(bT){if(bT.ct.c)br.cancel(bT);else bS(bT);};};br.defCTS=function(){bw.$cctor();return bw.defCTS;};br.UncaughtAsyncError=function(bS){bO.log("WebSharper: Uncaught asynchronous exception",bS);};br.FromContinuations=function(bS){return function(bT){var bU;function bV(bW){if(bU[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bU[0]=true;br.scheduler().Fork(bW);}}bU=[false];bS(function(bW){bV(function(){bT.k({$:0,$0:bW});});},function(bW){bV(function(){bT.k({$:1,$0:bW});});},function(bW){bV(function(){bT.k({$:2,$0:bW});});});};};br.cancel=function(bS){bS.k({$:2,$0:new bE.New(bS.ct)});};br.scheduler=function(){bw.$cctor();return bw.scheduler;};bs.Append=function(bS,bT){return bS.$==0?bT:bT.$==0?bS:{$:2,$0:bS,$1:bT};};bs.ToArray=function(bS){var bT;function bU(bV){if(bV.$==1)bT.push(bV.$0);else if(bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV.$==3)q.iter(function(bW){bT.push(bW);},bV.$0);}bT=[];bU(bS);return bT.slice(0);};bs.Concat=function(bS){var bT;bT=j.ofSeqNonCopying(bS);return j.TreeReduce(bs.Empty(),bs.Append,bT);};bs.Empty=function(){bG.$cctor();return bG.Empty;};bt.isBlank=function(bS){return bh.forall(bz.IsWhiteSpace,bS);};bu=h.Easing=bN.Class({},g,bu);bu.Custom=function(bS){return new bu.New(bS);};bu.New=bN.Ctor(function(bS){g.New.call(this);this.transformTime=bS;},bu);bv.New=function(bS,bT){return{k:bS,ct:bT};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.noneCT=bx.New(false,[]);bw.scheduler=new bA.New();bw.defCTS=[new bB.New()];bw.Zero=br.Return();bw.GetCT=function(bS){bS.k({$:0,$0:bS.ct});};};bx.New=function(bS,bT){return{c:bS,r:bT};};by.Filter=function(bS,bT){return new M.New$2(q.filter(bS,by.ToArray(bT)));};by.Except=function(bS,bT){var bU;bU=new M.New$2(by.ToArray(bT));bU.ExceptWith(by.ToArray(bS));return bU;};by.ToArray=function(bS){var bT;bT=q.create(bS.get_Count(),void 0);bS.CopyTo(bT);return bT;};by.Intersect=function(bS,bT){var bU;bU=new M.New$2(by.ToArray(bS));bU.IntersectWith(by.ToArray(bT));return bU;};bz.IsWhiteSpace=function(bS){return bS.match(new a.RegExp("\\s"))!==null;};_1.TryParse=function(bS,bT,bU,bV){var bW,bX;bW=+bS;bX=bW===bW-bW%1&&bW>=bT&&bW<=bU;bX?bV.set(bW):void 0;return bX;};bA=br.Scheduler=bN.Class({Fork:function(bS){var bT;bT=this;this.robin.push(bS);this.idle?(this.idle=false,a.setTimeout(function(){bT.tick();},0)):void 0;},tick:function(){var bS,bT,bU;bT=this;bU=bR.now();bS=true;while(bS)if(this.robin.length===0){this.idle=true;bS=false;}else{(this.robin.shift())();bR.now()-bU>40?(a.setTimeout(function(){bT.tick();},0),bS=false):void 0;}}},g,bA);bA.New=bN.Ctor(function(){g.New.call(this);this.idle=true;this.robin=[];},bA);bB=b.CancellationTokenSource=bN.Class({},g,bB);bB.New=bN.Ctor(function(){g.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bB);bC.Children=function(bS,bT){var bU,bV,bW;if(bT!=null&&bT.$==1){bW=[];bU=bT.$0[0].nextSibling;while(bU!==bT.$0[1]){bW.push(bU);bU=bU.nextSibling;}return{$:0,$0:bW};}else return{$:0,$0:q.init(bS.childNodes.length,(bV=bS.childNodes,function(bX){return bV[bX];}))};};bC.Except=function(bS,bT){var bU;bU=bS.$0;return{$:0,$0:q.filter(function(bV){return q.forall(function(bW){return!(bV===bW);},bU);},bT.$0)};};bC.Iter=function(bS,bT){q.iter(bS,bT.$0);};bC.DocChildren=function(bS){var bT;function bU(bV){if(bV!=null&&bV.$==2)bU(bV.$0.Current);else if(bV!=null&&bV.$==1)bT.push(bV.$0.El);else if(bV==null);else if(bV!=null&&bV.$==5)bT.push(bV.$0);else if(bV!=null&&bV.$==4)bT.push(bV.$0.Text);else if(bV!=null&&bV.$==6)q.iter(function(bW){if(bW==null||bW.constructor===D)bU(bW);else bT.push(bW);},bV.$0.Els);else{bU(bV.$0);bU(bV.$1);}}bT=[];bU(bS.Children);return{$:0,$0:j.ofSeqNonCopying(bT)};};bE=b.OperationCanceledException=bN.Class({},bD,bE);bE.New=bN.Ctor(function(bS){bE.New$1.call(this,"The operation was canceled.",null,bS);},bE);bE.New$1=bN.Ctor(function(bS,bT,bU){this.message=bS;this.inner=bT;D.setPrototypeOf(this,bE.prototype);this.ct=bU;},bE);bF.Create=function(bS){return bI.New(false,bS,bF.forceLazy);};bF.forceLazy=function(){var bS;bS=this.v();this.c=true;this.v=bS;this.f=bF.cachedLazy;return bS;};bF.cachedLazy=function(){return this.v;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Empty={$:0};};bI.New=function(bS,bT,bU){return{c:bS,v:bT,f:bU};};bN.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
